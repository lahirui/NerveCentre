@model List<NerveCentre.Models.DisplayValues>
@{
    ViewBag.Title = "NERVE CENTRE";
    Layout = "~/Views/Shared/_LayoutDisplay.cshtml";
}
<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<div class="row">
    <iframe id="rotator" src="@Url.Action("DisplayDefault", "Displays")" scrolling="auto" class="responsive-iframe" onload="this.width = 2340; this.height = 1200;" style="margin-top:-50px; margin-bottom:100px; overflow-x:hidden; overflow-y:hidden" frameborder="0"></iframe>
</div>

<div class="row text-center" style="margin-top:950px; margin-left:870px">
    <div class="col-md-1 text-center" style="padding-top: 10px; text-align:right; padding-left:20px">
        <button id="btnPause" type="button" class=" btn btn-danger glyphicon glyphicon-pause" style="width:40px; height:40px;" onclick="Pause()" />
    </div>

    <div class="col-md-1 text-center" style="padding-top: 10px; text-align:left">
        <button id="btnStart" type="button" class="btn btn-success glyphicon glyphicon-play" style="width:40px; height:40px;" onclick="Play()" />
    </div>

</div>

<script type="text/javascript">

    RedirectAfterDelayFn();

    @*
        var run;
        var seconds = 5000;
        function RedirectAfterDelayFn() {
        $.ajax({
            type: 'GET',
            url: '@Url.Action("DisplayBoard", "Displays")',
            success: function (data) {

                var pathArray = [];
                var durationArray = [];

                $.each(data, function (i, v) {
                    pathArray.push([v.ModelResourcePath]);
                })

                $.each(data, function (i, w) {
                    durationArray.push([w.ModelDuration]);
                })
                var index = 1;
                var el = document.getElementById("rotator");



                setTimeout(function rotate() {

                    if (index === pathArray.length) {
                        index = 0;
                    }

                    el.src = pathArray[index];
                    index = index + 1;
                    setTimeout(rotate, seconds);
                    alert(el.src);

                }, seconds);

            }
        })

    }*@


    var run;
    var el = document.getElementById('rotator');
    var pathArray = [];
    var seconds = 30000;
    var index = 0;

    function RedirectAfterDelayFn() {
        $.ajax({
            type: 'GET',
            url: '@Url.Action("DisplayBoard", "Displays")',
            success: function (data) {

                $.each(data, function (i, v) {
                    pathArray.push([v.ModelResourcePath]);
                })
                rotateScreen();
            }
        })
    }

   //Start Display
    function rotateScreen() {
        run = setInterval(rotate, seconds)
        console.log('start')
    }
    function rotate() {
        if (index === pathArray.length) {
            index = 0;
        }
        el.src = pathArray[index];
        index++;
    }

    //Pause Display
    function Pause() {
        clearInterval(run);
        console.log('pause')
    }

    //Re-Start Display
    function Play() {
        run = setInterval(rotate, seconds);
        console.log('play');
    }
</script>

<style>
    .container {
        position: relative;
        overflow: hidden;
        width: 100%;
        padding-top: 56.25%; /* 16:9 Aspect Ratio (divide 9 by 16 = 0.5625) */
    }

    /* Then style the iframe to fit in the container div with full height and width */
    .responsive-iframe {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        width: 100%;
        height: 100%;
    }

    /*div {
        text-align: center;
        width: 100%;
        vertical-align: middle;
        height: 100%;
        display: table-cell;
    }

    .iframe {
        width: 200px;
    }

    div,
    body,
    html {
        height: 100%;
        width: 100%;
    }

    body {
        display: table;
    }*/
</style>