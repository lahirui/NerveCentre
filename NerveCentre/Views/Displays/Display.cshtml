@model List<NerveCentre.Models.DisplayValues>
@{
    ViewBag.Title = "NERVE CENTRE";
    Layout = "~/Views/Shared/_LayoutDisplay.cshtml";
}
<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<div class="row">
    <iframe id="rotator" src="@Url.Action("DisplayDefault", "Displays")" scrolling="auto" class="responsive-iframe" onload="this.width = 1200; this.height = 1200;" style="margin-top:-50px; margin-bottom:100px; overflow-x:hidden; overflow-y:hidden" frameborder="0"></iframe>
    @*<iframe  src="@Url.Action("DisplayDefault", "Displays")" scrolling="auto" class="responsive-iframe" onload="this.width = 1200; this.height = 1000;" style="margin-top:-95px; margin-bottom:-95px; overflow-x:hidden; overflow-y:hidden" frameborder="0"></iframe>*@

</div>

@*<div class="row" style="margin-top:870px">
    <div class="col-md-1 text-center" style="padding-top: 10px; text-align:right">

        <button id="btnPause" type="button" class=" btn btn-danger glyphicon glyphicon-pause" style="width:40px; height:40px;" onclick="stopRefresh()" />
    </div>
    <div class="col-md-1 text-center" style="padding-top: 10px; text-align:left">
        <button id="btnStart" type="button" class="btn btn-success glyphicon glyphicon-play" style="width:40px; height:40px;" onclick="startRefresh()" />
    </div>
    <div class="col-md-1 text-center" style="padding-top: 20px; text-align:left">
        <asp:Label ID="lblMessage" style="color:red; font-weight:bold" runat="server" Text=""></asp:Label>
    </div>
</div>*@

<script type="text/javascript">

    RedirectAfterDelayFn();
    var seconds = 30000;
     function RedirectAfterDelayFn() {
        $.ajax({
            type: 'GET',
            url: '@Url.Action("DisplayBoard", "Displays")',
            success: function (data) {

                var pathArray = [];
                var durationArray = [];
                
                $.each(data, function (i, v) {
                    pathArray.push([v.ModelResourcePath]);
                })

                $.each(data, function (i, w) {
                    durationArray.push([w.ModelDuration]);
                })

                var index = 1;
                var el = document.getElementById("rotator");

                setTimeout(function rotate() {

                    if (index === pathArray.length) {
                        index = 0;
                    }

                    el.src = pathArray[index];
                    index = index + 1;
                    setTimeout(rotate, seconds);

                }, seconds);

            }
        })

    }

    //Stop Display
    function stopRefresh() {

        clearTimeout(seconds = 0);
    }

    //Re-Start Display
    function startRefresh() {

        RedirectAfterDelayFn();
    }
</script>

<style>
    .container {
        position: relative;
        overflow: hidden;
        width: 100%;
        padding-top: 56.25%; /* 16:9 Aspect Ratio (divide 9 by 16 = 0.5625) */
    }

    /* Then style the iframe to fit in the container div with full height and width */
    .responsive-iframe {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        width: 100%;
        height: 100%;
    }
</style>